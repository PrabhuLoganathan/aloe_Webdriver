language: python
python:
- '2.7'
- '3.4'
- '3.5'
before_install:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
install:
- pip install -r requirements.txt
- pip install -r test_requirements.txt
- pip install coveralls
script:
- pep8 .
- pylint aloe_webdriver setup.py
- coverage erase
- coverage run -m nose
- coverage report
- "./tools/check_installs"
- make -C docs coverage
after_success:
- coveralls
deploy:
  provider: pypi
  user: koterpillar
  password:
    secure: rGGAeMPGpSvjbn4dK9UXlmu3vwu1OOjBzcx/ENC7GMWc6GrV7iTSxGqe5euHnGebFWmXex6wcnuYPPiZHN468jqg7Rvy4qx91JkLqRrONOYDrovEqjq6m4LAfU0B5ieDLJHkyMSZa9yD9lofn3qQ/D6TdoUH8bHvQ8vW/aIah0g=
  server: https://pypi.python.org/pypi
  on:
    tags: true
    all_branches: true
    python: 3.4
    condition: '"$TRAVIS_TAG" = "v$(python setup.py --version)"'
